<!DOCTYPE html>
<html>

  <head>

  </head>

  <style>
    body {
      overflow: hidden;
    }

  </style>

  <body>

    <div id="screen">

    </div>



    <script type='module' defer>

      import * as me from 'https://cdn.jsdelivr.net/npm/melonjs@14.5.0/dist/melonjs.module.js'

  var width = window.innerWidth
  var height = window.innerHeight
  var width2 = width/2
  var height2 = height/2
  
  me.device.onReady(
    () => {
      
      if (!me.video.init(width, height, {parent: 'screen', scale:'auto'})){
        alert("Your browser can't run this")
        return
      }
      
      
      me.loader.load({name: "bat", type:"image", src: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAWCAYAAACFbNPBAAAAAXNSR0IArs4c6QAAAK9JREFUeF7t1bERwzAMBEGx/46V0A3YDi79VY4AC97o3Hvv4yNA4KvAEYiXQeC3gEC8DgJ/BATieRAQiDdAoAn4gzQ3UyMCAhk5tDWbgECam6kRAYGMHNqaTUAgzc3UiIBARg5tzSYgkOZmakRAICOHtmYTEEhzMzUiIJCRQ1uzCQikuZkaERDIyKGt2QQE0txMjQgIZOTQ1mwCAmlupkYEBDJyaGs2AYE0N1MbAu8HUNBYudsfB8kAAAAASUVORK5CYII="})
      
      me.input.bindKey(me.input.KEY.LEFT, 'left', true)
      me.input.bindKey(me.input.KEY.RIGHT, 'right', true)
      me.input.bindKey(me.input.KEY.A, 'a', true)
      me.input.bindKey(me.input.KEY.D, 'd', true)
      
      class player_bat extends me.Sprite {
      
      constructor(x,y,settings){
       	
        super(x,y,settings)
        
        this.body = new me.Body(this)
        this.body.addShape(new me.Rect(0,0,200,22))
        this.body.setMaxVelocity(8,0)
        
      
      }
       
      update (dt){
      	
      	if (me.input.isKeyPressed('left') || me.input.isKeyPressed('a'))	{
        	
        	this.body.force.set(-8,0)
        
        
        }
      	
        else if (me.input.isKeyPressed('right') || me.input.isKeyPressed('d')){
        
        	this.body.force.set(8,0)
        
        }
      
	
  			if (this.pos.x < 0){
      
      this.body.force.set(8,0)
      
      }
  
  			if (this.pos.x > width){
        	
          this.body.force.set(-8,0)
          
        }
  
  
  
  
     		return( super.update() || this.body.vel.x !== 0 )
      
      }
      
      
      
      
      
}
      
     me.game.world.addChild(new player_bat(width2, height-22, { image: 'bat' }))
      
    }
  )
  
  </script>



  </body>

</html>
